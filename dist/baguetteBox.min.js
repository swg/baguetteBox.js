/*!
 * baguetteBox.js
 * @author  feimosi
 * @version 1.9.1
 * @url https://github.com/feimosi/baguetteBox.js
 */
!function(e,t){"use strict";"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.baguetteBox=t()}(this,function(){"use strict";function e(e,a){N.transforms=function(){var e=p("div");return"undefined"!=typeof e.style.perspective||"undefined"!=typeof e.style.webkitPerspective}(),N.svg=function(){var e=p("div");return e.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(e.firstChild&&e.firstChild.namespaceURI)}(),function(){if(h=m("baguetteBox-overlay"))return v=m("baguetteBox-slider"),y=m("previous-button"),w=m("next-button"),void(k=m("close-button"));(h=p("div")).setAttribute("role","dialog"),h.id="baguetteBox-overlay",document.getElementsByTagName("body")[0].appendChild(h),(v=p("div")).id="baguetteBox-slider",h.appendChild(v),(y=p("button")).setAttribute("type","button"),y.id="previous-button",y.setAttribute("aria-label","Previous"),y.innerHTML=N.svg?C:"&lt;",h.appendChild(y),(w=p("button")).setAttribute("type","button"),w.id="next-button",w.setAttribute("aria-label","Next"),w.innerHTML=N.svg?E:"&gt;",h.appendChild(w),(k=p("button")).setAttribute("type","button"),k.id="close-button",k.setAttribute("aria-label","Close"),k.innerHTML=N.svg?x:"&times;",h.appendChild(k),y.className=w.className=k.className="baguetteBox-button",f(h,"click",Y),f(y,"click",j),f(w,"click",M),f(k,"click",O),f(v,"contextmenu",V),f(h,"touchstart",R),f(h,"touchmove",D),f(h,"touchend",z),f(document,"focus",U,!0)}(),t(e),function(e,t){var a=document.querySelectorAll(e),i={galleries:[],nodeList:a};H[e]=i,[].forEach.call(a,function(e){t&&t.filter&&(I=t.filter);var a=[];if(a="A"===e.tagName?[e]:e.getElementsByTagName("a"),0!==(a=[].filter.call(a,function(e){if(-1===e.className.indexOf(t&&t.ignoreClass))return I.test(e.href)})).length){var r=[];[].forEach.call(a,function(e,a){var i=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1,function(e,t){if(L===e)return;L=e,function(e){e||(e={});for(var t in T)B[t]=T[t],"undefined"!=typeof e[t]&&(B[t]=e[t]);v.style.transition=v.style.webkitTransition="fadeIn"===B.animation?"opacity .4s ease":"slideIn"===B.animation?"":"none","auto"===B.buttons&&("ontouchstart"in window||1===L.length)&&(B.buttons=!1),y.style.display=w.style.display=B.buttons?"":"none";try{h.style.backgroundColor=B.overlayBackgroundColor}catch(n){}}(t);for(;v.firstChild;)v.removeChild(v.firstChild);q.length=0;for(var n,o=[],a=[],i=0;i<e.length;i++)(n=p("div")).className="full-image",n.id="baguette-img-"+i,q.push(n),o.push("baguetteBox-figure-"+i),a.push("baguetteBox-figcaption-"+i),v.appendChild(q[i]);h.setAttribute("aria-labelledby",o.join(" ")),h.setAttribute("aria-describedby",a.join(" "))}(r,t),function(e){B.noScrollbars&&(document.documentElement.style.overflowY="hidden",document.body.style.overflowY="scroll");if("block"===h.style.display)return;f(document,"keydown",n),A=e,S={count:0,startX:null,startY:null},l(A,function(){c(A),d(A)}),u(),h.style.display="block",B.fullScreen&&(h.requestFullscreen?h.requestFullscreen():h.webkitRequestFullscreen?h.webkitRequestFullscreen():h.mozRequestFullScreen&&h.mozRequestFullScreen());setTimeout(function(){h.className="visible",B.bodyClass&&document.body.classList&&document.body.classList.add(B.bodyClass),B.afterShow&&B.afterShow()},50),B.onChange&&B.onChange(A,q.length);X=document.activeElement,o()}(a)},s={eventHandler:i,imageElement:e};f(e,"click",i),r.push(s)}),i.galleries.push(r)}})}(e,a)}function t(e){if(H.hasOwnProperty(e)){var t=H[e].galleries;[].forEach.call(t,function(e){[].forEach.call(e,function(e){g(e.imageElement,"click",e.eventHandler)}),L===e&&(L=[])}),delete H[e]}}function n(e){switch(e.keyCode){case 37:s();break;case 39:r();break;case 27:a()}}function o(){B.buttons?y.focus():k.focus()}function a(){B.noScrollbars&&(document.documentElement.style.overflowY="auto",document.body.style.overflowY="auto"),"none"!==h.style.display&&(g(document,"keydown",n),h.className="",setTimeout(function(){h.style.display="none",document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),B.bodyClass&&document.body.classList&&document.body.classList.remove(B.bodyClass),B.afterHide&&B.afterHide(),i(),X&&X.focus()},500))}function i(){[].forEach.call(q,function(e){e.getElementsByTagName("video").length>0&&e.getElementsByTagName("video")[0].pause()})}function l(e,t){var n=q[e],o=L[e],a=!1;if(void 0!==n&&(a=P.test(o.imageElement.href)),void 0!==n&&void 0!==o)if(n.getElementsByTagName("canvas").length>0||n.getElementsByTagName("video").length>0)t&&t();else{var i=o.imageElement,l=a?i.getElementsByTagName("video")[0]:i.getElementsByTagName("canvas")[0],r="function"==typeof B.captions?B.captions.call(L,i):i.getAttribute("data-caption")||i.title,s=function(e){var t=e.href;if(e.dataset){var n=[];for(var o in e.dataset)"at-"!==o.substring(0,3)||isNaN(o.substring(3))||(n[o.replace("at-","")]=e.dataset[o]);for(var a=Object.keys(n).sort(function(e,t){return parseInt(e,10)<parseInt(t,10)?-1:1}),i=window.innerWidth*window.devicePixelRatio,l=0;l<a.length-1&&a[l]<i;)l++;t=n[a[l]]||t}return t}(a?i:i),u=p("figure");if(u.id="baguetteBox-figure-"+e,u.innerHTML='<div class="baguetteBox-spinner"><div class="baguetteBox-double-bounce1"></div><div class="baguetteBox-double-bounce2"></div></div>',B.captions&&r){var c=p("figcaption");c.id="baguetteBox-figcaption-"+e,c.innerHTML=r,u.appendChild(c)}if(n.appendChild(u),a){var d=p("video");d.addEventListener("loadeddata",function(){var n=document.querySelector("#baguette-img-"+e+" .baguetteBox-spinner");u.removeChild(n),!B.async&&t&&t()});var f=p("source");f.setAttribute("src",s),d.appendChild(f),B.titleTag&&r&&(d.title=r),u.appendChild(d)}else{var g=p("canvas");window.loadImage(s,function(n){window.EXIF.getData(n,function(){var o=EXIF.getTag(this,"Orientation"),a=window.loadImage.scale(n,{orientation:o||0});g.parentNode.replaceChild(a,g);var i=document.querySelector("#baguette-img-"+e+" .baguetteBox-spinner");u.removeChild(i),!B.async&&t&&t()})}),g.alt=l?l.alt||"":"",B.titleTag&&r&&(g.title=r),u.appendChild(g)}B.async&&t&&t()}}function r(){var e;return A<=q.length-2?(A++,u(),c(A),e=!0):B.animation&&(v.className="bounce-from-right",setTimeout(function(){v.className=""},400),e=!1),B.onChange&&B.onChange(A,q.length),e}function s(){var e;return A>=1?(A--,u(),d(A),e=!0):B.animation&&(v.className="bounce-from-left",setTimeout(function(){v.className=""},400),e=!1),B.onChange&&B.onChange(A,q.length),e}function u(){i();var e=100*-A+"%";"fadeIn"===B.animation?(v.style.opacity=0,setTimeout(function(){N.transforms?v.style.transform=v.style.webkitTransform="translate3d("+e+",0,0)":v.style.left=e,v.style.opacity=1},400)):N.transforms?v.style.transform=v.style.webkitTransform="translate3d("+e+",0,0)":v.style.left=e,q[A].getElementsByTagName("video").length>0&&q[A].getElementsByTagName("video")[0].play()}function c(e){e-A>=B.preload||l(e+1,function(){c(e+1)})}function d(e){A-e>=B.preload||l(e-1,function(){d(e-1)})}function f(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o):e.attachEvent("on"+t,function(e){(e=e||window.event).target=e.target||e.srcElement,n(e)})}function g(e,t,n,o){e.removeEventListener?e.removeEventListener(t,n,o):e.detachEvent("on"+t,n)}function m(e){return document.getElementById(e)}function p(e){return document.createElement(e)}function b(){g(h,"click",Y),g(y,"click",j),g(w,"click",M),g(k,"click",O),g(v,"contextmenu",V),g(h,"touchstart",R),g(h,"touchmove",D),g(h,"touchend",z),g(document,"focus",U,!0),function(){for(var e in H)H.hasOwnProperty(e)&&t(e)}(),g(document,"keydown",n),document.getElementsByTagName("body")[0].removeChild(document.getElementById("baguetteBox-overlay")),H={},L=[],A=0}var h,v,y,w,k,C='<svg width="44" height="60"><polyline points="30 10 10 30 30 50" stroke="rgba(255,255,255,0.5)" stroke-width="4"stroke-linecap="butt" fill="none" stroke-linejoin="round"/></svg>',E='<svg width="44" height="60"><polyline points="14 10 34 30 14 50" stroke="rgba(255,255,255,0.5)" stroke-width="4"stroke-linecap="butt" fill="none" stroke-linejoin="round"/></svg>',x='<svg width="30" height="30"><g stroke="rgb(160,160,160)" stroke-width="4"><line x1="5" y1="5" x2="25" y2="25"/><line x1="5" y1="25" x2="25" y2="5"/></g></svg>',B={},T={captions:!0,buttons:"auto",fullScreen:!1,noScrollbars:!1,bodyClass:"baguetteBox-open",titleTag:!1,async:!1,preload:2,animation:"slideIn",afterShow:null,afterHide:null,onChange:null,overlayBackgroundColor:"rgba(0,0,0,.8)"},N={},L=[],A=0,S={},F=!1,I=/.+\.(gif|jpe?g|png|webp|mp4|webm)/i,P=/.+\.(mp4|webm)/i,H={},q=[],X=null,Y=function(e){-1!==e.target.id.indexOf("baguette-img")&&a()},j=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,s()},M=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,r()},O=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,a()},R=function(e){S.count++,S.count>1&&(S.multitouch=!0),S.startX=e.changedTouches[0].pageX,S.startY=e.changedTouches[0].pageY},D=function(e){if(!F&&!S.multitouch){e.preventDefault?e.preventDefault():e.returnValue=!1;var t=e.touches[0]||e.changedTouches[0];t.pageX-S.startX>40?(F=!0,s()):t.pageX-S.startX<-40?(F=!0,r()):S.startY-t.pageY>100&&a()}},z=function(){S.count--,S.count<=0&&(S.multitouch=!1),F=!1},V=function(){z()},U=function(e){"block"===h.style.display&&h.contains&&!h.contains(e.target)&&(e.stopPropagation(),o())};return[].forEach||(Array.prototype.forEach=function(e,t){for(var n=0;n<this.length;n++)e.call(t,this[n],n,this)}),[].filter||(Array.prototype.filter=function(e,t,n,o,a){for(n=this,o=[],a=0;a<n.length;a++)e.call(t,n[a],a,n)&&o.push(n[a]);return o}),{run:e,showNext:r,showPrevious:s,destroy:b}});